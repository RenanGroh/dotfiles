################
### MONITORS ###
################

# --- ESQUERDA (Vertical) ---
# Resolução física: 2560x1080 (Vertical)
# Escala 1.25 -> Tamanho Lógico: 864 x 2048
monitor = HDMI-A-1, 2560x1080@75, 0x0, 1.25, transform, 1

# --- DIREITA (Principal) ---
# Posição X: 864 (Exatamente onde o outro termina)
# Posição Y: 448 (Centralizado verticalmente em relação ao outro: (2048 - 1152) / 2)
monitor = DP-3, 2560x1440@165, 864x500, 1.25

# --- Ancoragem de Workspaces ---
# Principal
workspace = 1, monitor:DP-3
workspace = 2, monitor:DP-3
workspace = 3, monitor:DP-3
workspace = 4, monitor:DP-3
workspace = 5, monitor:DP-3

# Principal
workspace = 6, monitor:HDMI-A-1
workspace = 7, monitor:HDMI-A-1
workspace = 8, monitor:HDMI-A-1
workspace = 9, monitor:HDMI-A-1

# Workspaces Especiais
workspace = special:gemini, on-created-empty:[float; size 900 700; center] chromium --app=https://gemini.google.com --class=GeminiApp --user-data-dir=/home/renxn/.config/chromium-gemini
workspace = special:discord, on-created-empty:[float; size 900 700; center] chromium --app=https://discord.com/channels/@me --class=DiscordWeb --user-data-dir=/home/renxn/.config/chromium-discord
workspace = special:music, on-created-empty:[float; size 1650 950; center] spotify
workspace = special:notes, on-created-empty:[float; size 1200 800; center] subl

###################
### MY PROGRAMS ###
###################


# Set programs that you use
$terminal = kitty
$fileManager = thunar
$menu = wofi --show drun


#################
### AUTOSTART ###
#################

# Autostart necessary processes (like notifications daemons, status bars, etc.)
# Or execute your favorite apps at launch like this:

exec-once = killall waybar; waybar -c ~/.config/waybar/config_DP3.jsonc & waybar -c ~/.config/waybar/config_HDMI_1.jsonc
exec-once = dunst
exec-once = swww-daemon --format xrgb
exec-once = sleep 0.5 && waypaper --restore
exec-once = easyeffects --gapplication-service
exec-once = /usr/lib/polkit-kde-authentication-agent-1
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = wl-clip-persist --clipboard regular
exec-once = hypridle
exec-once = blueman-applet

#############################
### ENVIRONMENT VARIABLES ###
#############################

# --- Localização e Idioma ---
# Sistema em Inglês, mas formatos BR (Opcional, ajuste conforme gosto)
env = LANG,en_US.UTF-8
# env = LC_TIME,pt_BR.UTF-8      # Descomente se quiser datas em PT-BR
# env = LC_NUMERIC,pt_BR.UTF-8   # Descomente se quiser numeros com virgula

# --- Input Method ---
env = XMODIFIERS,@im=none
env = QT_IM_MODULE,
# Deixe QT_IM_MODULE vazio ou remova a linha se não usar fcitx

# --- Toolkit Backends ---
env = GDK_BACKEND,wayland,x11    # Tenta Wayland no GTK, falha para X11 se der erro
env = QT_QPA_PLATFORM,wayland;xcb # Tenta Wayland no Qt, falha para X11

# --- Temas e Aparência ---
env = QT_QPA_PLATFORMTHEME,qt6ct
env = XCURSOR_THEME,McMojave-cursors
env = XCURSOR_SIZE,28
env = HYPRCURSOR_THEME,McMojave-cursors
env = HYPRCURSOR_SIZE,28

# --- Apps Padrão ---
env = TERMINAL,kitty

###################
### PERMISSIONS ###
###################

# See https://wiki.hypr.land/Configuring/Permissions/
# Please note permission changes here require a Hyprland restart and are not applied on-the-fly
# for security reasonswindowrulev2 = monitor 1, class:^(NomeDoJogo)$

# ecosystem {
#   enforce_permissions = 1
# }

# permission = /usr/(bin|local/bin)/grim, screencopy, allow
# permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
# permission = /usr/(bin|local/bin)/hyprpm, plugin, allow


####################
### LOOK AND FEEL ###
#####################

# Refer to https://wiki.hypr.land/Configuring/Variables/

# https://wiki.hypr.land/Configuring/Variables/#general
general {
    gaps_in = 5
    gaps_out = 7

    border_size = 0

    # https://wiki.hypr.land/Configuring/Variables/#variable-types for info about colors
    col.active_border = rgba(666666ee) rgba(f4f1d6ee) 45deg
    col.inactive_border = rgba(000000ee)

    # Set to true enable resizing windows by clicking and dragging on borders and gaps
    #resize_on_border = false
    allow_tearing = true

    layout = dwindle
}

decoration {
    rounding = 4
    rounding_power = 2

    dim_special = 0.0 # 0.0 remove o cinza. O padrão costuma ser 0.2 ou 0.5

    # Change transparency of focused and unfocused windows
    active_opacity = 0.95
    inactive_opacity = 0.95
    
    dim_inactive = true
    dim_modal = true
    dim_strength = 0.3 
    dim_around = 0.0
    dim_special = 0.2
    
    fullscreen_opacity = 0.95

    shadow {
        enabled = false
        #range = 4yay -S wl-clip-persist
        #render_power = 3
        #color = rgba(1a1a1aee)
    }

    blur {
        enabled = true
        size = 8
        passes = 1
	xray = false
	noise = 0.10
        contrast = 0.8916
	brightness = 0.8172
	new_optimizations = true
        ignore_opacity = true
        vibrancy = 0.1696
	popups = false
	vibrancy_darkness = 0
    }
}

# https://wiki.hypr.land/Configuring/Variables/#animations
animations {
    enabled = yes, please :

    # Default curves, see https://wiki.hypr.land/Configuring/Animations/#curves
    #        NAME,           X0,   Y0,   X1,   Y1
    bezier = easeOutQuint,   0.23, 1,    0.32, 1
    bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1
    bezier = linear,         0,    0,    1,    1
    bezier = almostLinear,   0.5,  0.5,  0.75, 1
    bezier = quick,          0.15, 0,    0.1,  1

    # Default animations, see https://wiki.hypr.land/Configuring/Animations/
    #           NAME,          ONOFF, SPEED, CURVE,        [STYLE]
    animation = global,        1,     10,    default
    animation = border,        1,     5.39,  easeOutQuint
    animation = windows,       1,     4.79,  easeOutQuint
    animation = windowsIn,     1,     4.1,   easeOutQuint, popin 87%
    animation = windowsOut,    1,     1.49,  linear,       popin 87%
    animation = fadeIn,        1,     1.73,  almostLinear
    animation = fadeOut,       1,     1.46,  almostLinear
    animation = fade,          1,     3.03,  quick
    animation = layers,        1,     3.81,  easeOutQuint
    animation = layersIn,      1,     4,     easeOutQuint, fade
    animation = layersOut,     1,     1.5,   linear,       fade
    animation = fadeLayersIn,  1,     1.79,  almostLinear
    animation = fadeLayersOut, 1,     1.39,  almostLinear
    animation = workspaces,    1,     1.94,  almostLinear, fade
    animation = workspacesIn,  1,     1.21,  almostLinear, fade
    animation = workspacesOut, 1,     1.94,  almostLinear, fade
    animation = zoomFactor,    1,     7,     quick
}

# Ref https://wiki.hypr.land/Configuring/Workspace-Rules/
# "Smart gaps" / "No gaps when only"
# uncomment all if you wish to use that.
# workspace = w[tv1], gapsout:0, gapsin:0
# workspace = f[1], gapsout:0, gapsin:0
# windowrule = bordersize 0, floating:0, onworkspace:w[tv1]
# windowrule = rounding 0, floating:0, onworkspace:w[tv1]
# windowrule = bordersize 0, floating:0, onworkspace:f[1]
# windowrule = rounding 0, floating:0, onworkspace:f[1]

# See https://wiki.hypr.land/Configuring/Dwindle-Layout/ for more
dwindle {
    pseudotile = true # Master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
    preserve_split = true # You probably want this
}

# See https://wiki.hypr.land/Configuring/Master-Layout/ for more
master {
    new_status = master
}

# https://wiki.hypr.land/Configuring/Variables/#misc
misc {
    force_default_wallpaper = 0 # Set to 0 to disable the anime mascot wallpapers (conflicts with waypaper/swww)
    disable_hyprland_logo = false # If true disables the random hyprland logo / anime girl background. :(

    # Configurações de Monitor / Jogo 
    vrr = 2

    # Configurações de Energia (Para a tela voltar a ligar)
    mouse_move_enables_dpms = true
    key_press_enables_dpms = true
}


#############
### INPUT ###
#############

# https://wiki.hypr.land/Configuring/Variables/#input
input {
    kb_layout = us
    kb_variant = intl
    kb_model =
    kb_options =
    kb_rules =

    # 1:1 Raw Input (Perfeito para CS2 e precisão)
    accel_profile = flat
    force_no_accel = true
    sensitivity = 0.0 

    # 1 = Foco muda ao passar o mouse (Mais produtivo)
    # 0 = Foco muda ao clicar (Estilo Windows)
    follow_mouse = 1
}


# See https://wiki.hypr.land/Configuring/Gestures
gesture = 3, horizontal, workspace

# Example per-device config
# See https://wiki.hypr.land/Configuring/Keywords/#per-device-input-configs for more
device {
    name = epic-mouse-v1
    sensitivity = -0.5
}


###################
### KEYBINDINGS ###
###################

# See https://wiki.hypr.land/Configuring/Keywords/
$mainMod = SUPER # Sets "Windows" key as main modifier

# Example binds, see https://wiki.hypr.land/Configuring/Binds/ for more
bind = $mainMod, RETURN, exec, $terminal
bind = $mainMod, SPACE, exec, pkill wofi || wofi --show drun
bind = $mainMod, Q, killactive,
bind = $mainMod, Delete, exit,
bind = $mainMod, E, exec, $fileManager
bind = $mainMod, F, togglefloating,
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod, J, togglesplit, # dwindle

# Super + F = Fullscreen Real (Modo 0) - Games/YouTube
bind = $mainMod, F11, fullscreen, 0
# Super + M = Modo Foco "Maximized" (Modo 1) - Mantém Waybar e Gaps
bind = $mainMod, F10, fullscreen, 1

# --- Navegação de Janelas (Alt+Tab style) ---
# cyclenext: Alterna para a próxima janela
# bringactivetotop: Traz a janela para frente visualmente
bind = $mainMod, Tab, cyclenext,
bind = $mainMod, Tab, bringactivetotop,

# --- spotify ---

# Lógica: pgrep checa se 'spotify' está rodando.
# && (E): Se estiver rodando -> executa o toggle do workspace.
# || (OU): Se NÃO estiver rodando -> executa o comando 'spotify'.
#bind = $mainMod, XF86AudioMute, exec, pgrep -x spotify && hyprctl dispatch togglespecialworkspace music || spotify
bind = $mainMod, XF86AudioMute, togglespecialworkspace, music

# Atalho para abrir a galeria de wallpapers
bind = $mainMod SHIFT, W, exec, waypaper

# --- waybar --
bind = $mainMod, B, exec, pkill -SIGUSR1 -f "config_DP3.jsonc"
bind = $mainMod ALT, B, exec, pkill -SIGUSR1 waybar
bind = $mainMod CTRL, B, exec, ~/.config/hypr/scripts/restart_waybar.sh

# --- Quick Notes (Sublime Text) ---
bind = $mainMod, N, togglespecialworkspace, notes

# --- Clipboard Binds ---

# 1. Super + V: Abre o histórico. Ao selecionar, copia para o transferências e fecha.
#bind = $mainMod, V, exec, cliphist list | wofi --dmenu --prompt "Copiar..." --height
bind = $mainMod, V, exec, cliphist list | wofi --dmenu --prompt "Histórico" | cliphist decode | wl-copy

# 3. (Opcional) Limpar TUDO (Cuidado!)
bind = $mainMod ALT, V, exec, cliphist wipe

# --- Screenshot & OCR ---

# 1. Super + Shift + S: Tela Cheia (DP-3) -> Copia Original -> Abre Satty
bind = $mainMod SHIFT, S, exec, bash -c 'grim -o DP-3 /tmp/satty_temp.png && wl-copy < /tmp/satty_temp.png && notify-send -i /tmp/satty_temp.png "Screenshot" "Copy fullscreen" && satty --filename /tmp/satty_temp.png'

# 2. Super + S: Região -> Copia Original -> Abre Satty
bind = $mainMod, S, exec, bash -c 'grim -g "$(slurp)" /tmp/satty_temp.png && wl-copy < /tmp/satty_temp.png && notify-send -i /tmp/satty_temp.png "Screenshot" "Copy region" && satty --filename /tmp/satty_temp.png'

# 3. Super + Alt + S: Região -> Apenas Clipboard (Sem editor) - Mantém igual
bind = $mainMod ALT, S, exec, bash -c 'grim -g "$(slurp -d)" /tmp/satty_temp.png && wl-copy < /tmp/satty_temp.png && notify-send -i /tmp/satty_temp.png "Screenshot" "Copy reagion"'

# 4. Super + T: OCR (Mantém igual, pois não gera imagem para ver, gera texto)
bind = $mainMod, T, exec, bash -c 'grim -g "$(slurp)" - | tesseract - - -l por+eng | wl-copy && notify-send "Text Capture" "Copy text"'

# --- Gemini Webapp ---
bind = $mainMod, dead_grave, togglespecialworkspace, gemini

# --- Discord Webapp ---
bind = $mainMod, D, togglespecialworkspace, discord

# --- Desligar monitor --- 
bind = $mainMod, HOME, exec, sleep 1 && hyprctl dispatch dpms off

# --- ---
 
# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous

##############################
### WINDOWS AND WORKSPACES ###
##############################

# See https://wiki.hypr.land/Configuring/Window-Rules/ for more
# See https://wiki.hypr.land/Configuring/Workspace-Rules/ for workspace rules

# "Smart Gaps" modernos
# Quando houver apenas 1 janela no workspace: Gaps = 0, Bordas = 0
#workspace = w[t1], gapsout:0, gapsin:0
#windowrulev2 = bordersize 0, floating:0, onworkspace:w[t1]
#windowrulev2 = rounding 0, floating:0, onworkspace:w[t1]

# Ignore maximize requests from apps. You'll probably like this.
#windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
#windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# --- waybar ---

# Habilita o blur especificamente no namespace do waybar
layerrule = blur on, match:namespace ^waybar$

# (Opcional) Ignora pixels totalmente transparentes para economizar GPU
layerrule = ignore_alpha 0.0, match:namespace ^waybar$

# --- wlogout ---

# Regras para o wlogout (Camada de Saída)
layerrule = blur on, match:namespace ^logout_dialog$
layerrule = ignore_alpha 0.0, match:namespace ^logout_dialog$

# Animação de entrada (Fade)
#layerrule = animation fade, match:namespace ^logout_dialog$

# --- Regras do Spotify ---

# Definição da Classe (Regex para garantir compatibilidade)
$spotify_class = ^(spotify)$

# 1. Comportamento: Nasce escondido no workspace 'music'
windowrule = workspace special:music silent, match:class $spotify_class
windowrule = workspace special:music silent, match:title ^(Spotify.*)$

# 2. Geometria: Flutuante, Centralizado e Tamanho Personalizado
windowrule = float on, match:class $spotify_class
windowrule = center on, match:class $spotify_class

# 3. Tamanho: Largura Altura (Em pixels).
windowrule = size 1650 950, match:class $spotify_class

# 4. Aparencia: opacidade 
windowrule = opacity 0.70, match:class ^(spotify)$

# --- Regras do Waypaper ---

# Regra de janela para o Waypaper
windowrule = float on, match:class ^(waypaper)$
windowrule = center on, match:class ^(waypaper)$
windowrule = size 900 600, match:class ^(waypaper)$

# --- Steam Window Rules ---

# 1. A Janela Principal ("Steam"):
# - Vai para o workspace especial chamado 'steam' silenciosamente (sem te puxar pra lá no boot)
# - Forçamos ela a ser TILE dentro desse workspace (ou float se preferir centralizado)
windowrule = workspace steam silent, match:class ^(steam)$, match:title ^(Steam)$
windowrule = float on, match:class ^(steam)$, match:title ^(Steam)$
windowrule = size 1700 1000, match:class ^(steam)$, match:title ^(Steam)$
windowrule = center on, match:class ^(steam)$, match:title ^(Steam)$

# 2. Popups e Menus (Continuam flutuando)
# A regra de regex para ignorar menus vazios continua valendo
windowrule = float on, match:class ^(steam)$
#windowrule = center on, match:class ^(steam)$, match:title ^(^.+$)$

# 3. Tamanho dos Popups
windowrule = size 600 400, match:class ^(steam)$, match:title ^(Sign in to Steam)$
windowrule = size 800 900, match:class ^(steam)$, match:title ^(Friends List)$

# 4. Tamanho dos Popups
#windowrule = size 1000 600, match:class ^(steam)$, match:title ^(^.+$)$

# 5. Otimização visual para Dropdowns
windowrule = decorate off, match:class ^(steam)$, match:title ^$
windowrule = no_shadow on, match:class ^(steam)$, match:title ^$

# --- Notes - Sublime ---

windowrule = workspace special:notes, match:class ^(sublime_text)$

# 1. Força o modo flutuante
windowrule = float on,center on match:class ^(sublime_text)$

# 2. Define um tamanho padrão agradável (Largura x Altura)
windowrule = size 1200 800, match:class ^(sublime_text)$

# 3. Centraliza na tela
windowrule = center on, match:class ^(sublime_text)$

# 4. (Opcional - Estética) Adiciona um leve "dim" (escurecimento) 
# no resto da tela para focar na nota
windowrule = dim_around on, match:class ^(sublime_text)$

# --- Wofi ---

# Blur para o namespace do wofi (nova sintaxe de Layer Rules)
layerrule = blur on, match:namespace ^wofi$
# Ignora pixels totalmente transparentes (equivalente ao antigo ignorezero)
layerrule = ignore_alpha 0.0, match:namespace ^wofi$

# --- Vivaldi Geral ---
# Define a base para todas as janelas do Vivaldi (0.90)
windowrule = opacity 0.90 0.90, match:class ^(vivaldi-stable)$
windowrule = opacity 0.80 0.80, match:class ^(vivaldi-stable)$, match:title ^(Start Page - Vivaldi)$

# Save a File

windowrule = float on, match:title ^(All Files)$
windowrule = size 900 600, match:title ^(All Files)$
windowrule = center on, match:title ^(All Files)$

# YouTube Override (A Solução) 
# A flag 'opaque' força a janela a ser sólida, ignorando as regras de opacidade acima.
# Aplicamos tanto para o título normal quanto para fullscreen para garantir.

# 1. Tira o Blur (Economia de performance e visual)
windowrule = no_blur on, match:class ^(vivaldi-stable)$, match:title .*(YouTube).*

# 2. Força Opacidade Total (A "Bala de Prata")
windowrule = opaque on, match:class ^(vivaldi-stable)$, match:title .*(YouTube).*

# 3. Bloqueia proteção de tela
windowrule = idle_inhibit fullscreen, match:class ^(vivaldi-stable)$

# pdf
windowrule = opaque on, match:class ^(vivaldi-stable)$, match:title .*(.pdf).*

# coolors
windowrule = no_blur on, match:class ^(vivaldi-stable)$, match:title .*(Coolors).*
windowrule = opaque on, match:class ^(vivaldi-stable)$, match:title .*(Coolors).*

# Reddit
windowrule = opacity 0.95 override 0.90 override, match:class ^(vivaldi-stable)$, match:title .*(Reddit).*

# LocalHost
windowrule = opaque on, match:class ^(vivaldi-stable)$, match:title .*(Renan Groh | Fullstack Developer - Vivaldi).*

# --- Volume Control ---

# 1. Força o modo flutuante
windowrule = float on, match:class ^(org.pulseaudio.pavucontrol)$

# 2. Define um tamanho padrão agradável (Largura x Altura)
windowrule = size 1200 800, match:class ^(org.pulseaudio.pavucontrol)$

# 3. Centraliza na tela
windowrule = center on, match:class ^(org.pulseaudio.pavucontrol)$

# 4. (Opcional - Estética) Adiciona um leve "dim" (escurecimento) 
# no resto da tela para focar na nota
windowrule = dim_around on, match:class ^(org.pulseaudio.pavucontrol)$

# --- Godot ---

windowrule = opaque on, match:class ^(Godot)$
windowrule = opaque on, match:class ^(farm_sim (DEBUG))$



# --- thunar ---

# Rename Window
windowrule = float on, match:class ^(thunar)$, match:title ^(Rename.*)$
windowrule = center on, match:class ^(thunar)$, match:title ^(Rename.*)$
windowrule = size 800 50, match:class ^(thunar)$, match:title ^(Rename.*)$
#windowrule = opacity 0.80, match:class ^(thunar)$, match:title ^(Rename.*)$

# File Operation
windowrule = float on, match:class ^(thunar)$, match:title ^(File Operation Progress)$

# --- VSCode ---
# 0.90 (Ativo) e 0.90 (Inativo) - Ajuste o valor conforme seu gosto
# class:^(Code)$ pega a versão oficial. Se usar VSCodium, seria ^(VSCodium)$
windowrule = opacity 0.90 0.85, match:class ^(code)$

# --- qBittorrent ---

# 1. Opacidade Global (Aplica a tudo do qBit)
windowrule = opacity 0.90 0.85, match:class ^(org.qbittorrent.qBittorrent)$

# 2. Janela de REMOVER (Pop-up)
# Correção: Adicionado \ antes dos parênteses para escapar a regex.
# Adicionei 'center' para o popup não abrir num canto aleatório.
windowrule = float on, match:class ^(org.qbittorrent.qBittorrent)$, match:title ^(Remove torrent\(s\))$
windowrule = size 450 150, match:class ^(org.qbittorrent.qBittorrent)$, match:title ^(Remove torrent\(s\))$
windowrule = center on, match:class ^(org.qbittorrent.qBittorrent)$, match:title ^(Remove torrent\(s\))$

# 3. Janela PRINCIPAL
# A regex antiga estava muito ampla. Aqui forçamos a pegar apenas janelas que
# COMEÇAM (^) com "qBittorrent", ignorando o resto.
windowrule = float on, match:class ^(org.qbittorrent.qBittorrent)$, match:title ^(qBittorrent).*$
windowrule = size 1600 800, match:class ^(org.qbittorrent.qBittorrent)$, match:title ^(qBittorrent).*$

# --- imv ---
windowrule = opaque on, match:class ^(imv)$
windowrule = float on, match:class ^(imv)$
windowrule = size 1800 900, match:class ^(imv)$

# --- dunst ---

layerrule = blur on, match:namespace ^notifications$
layerrule = ignore_alpha 0.0, match:namespace ^notifications$

# Animação suave de entrada (Slide vindo da direita)
#layerrule = animation slide right, notifications

# --- Satty ---

windowrule = float on, match:class ^(com.gabm.satty)$
windowrule = center on, match:class ^(com.gabm.satty)$
windowrule = size (monitor_w*0.8) (monitor_h*0.8), match:class ^(com.gabm.satty)$
windowrule = opaque on, match:class ^(com.gabm.satty)$

# --- MPV ---

windowrule = float on, match:class ^(mpv)$
windowrule = opaque on, match:class ^(mpv)$
windowrule = size (monitor_w*0.75) (monitor_h*0.75), match:class ^(mpv)$

# --- Gemini ---
windowrule = float on, match:class ^(chrome-gemini.google.com__-Default)$
windowrule = size 1800 1100, match:class ^(chrome-gemini.google.com__-Default)$
windowrule = center on, match:class ^(chrome-gemini.google.com__-Default)$
# workspace
windowrule = workspace special:gemini, match:class ^(chrome-gemini.google.com__-Default)$

# --- blender ---

windowrule = opaque on, match:class blender
windowrule = opacity 0.9,opaque off, min_size 1000 600, match:title ^(Blender File View)$

# --- Outras Configs ---

xwayland {
  force_zero_scaling = true
}

general {
    allow_tearing = true
}

	###########################
	###       GAMING        ###
	###########################

cursor {
    no_hardware_cursors = true
}

render {
    direct_scanout = true
}

misc {
    vrr = 2 # Força o monitor a sincronizar os Hz com o FPS do jogo
}
# --- all steam game opaque ---

windowrule = opaque on, match:class ^(steam_app_.*)$
windowrule = no_blur on, match:class ^(steam_app_.*)$

# --- GameScope ---

windowrule = fullscreen on, match:class ^(gamescope)$
windowrule = monitor 0, match:class ^(gamescope)$
windowrule = workspace 1, match:class ^(gamescope)$
windowrule = immediate on, match:class ^(gamescope)$
windowrule = opaque on, match:class ^(gamescope)$

#windowrule = fullscreen_state 3 3, match:class ^(gamescope)$
#windowrule = no_initial_focus on, match:class ^(gamescope)$

# --- Anti-Idle Rules ---
# Impede que a tela desligue ou o PC durma enquanto Dota ou Gamescope estiverem focados
windowrule = idle_inhibit focus, match:class ^(gamescope)$
windowrule = idle_inhibit always, match:class ^(gamescope)$

# --- CS2  ---

# Permite tearing (desativa VSync forçado do compositor) para o CS2
windowrule = immediate on, match:class ^(cs2)$
windowrule = idle_inhibit always, match:class ^(cs2)$
windowrule = opaque on, match:class ^(cs2)$

# 1. Garante que o Gamescope não roube o foco de volta
windowrule = no_initial_focus on, match:class ^(steam)$, match:title ^(.*Overlay.*)$

# 2. Força janelas de "popup" da Steam a roubarem o foco
# Isso cobre Market, Chat, Perfil, etc.
windowrule = float on, match:class ^(steam)$, match:title ^(.*Market.*)$
windowrule = float on, match:class ^(steam)$, match:title ^(.*Browser.*)$
windowrule = float on, match:class ^(steam)$, match:title ^(.*Chat.*)$

# A REGRA DE OURO:
# Se o foco estiver teimoso, isso força o Hyprland a passar o input para a janela flutuante
# assim que o mouse passar por cima dela (se você usa 'follow_mouse = 1')

# -- Dota 2 --
# Regra de Tearing para o Dota 221
windowrule = immediate on, match:class ^(dota2)$
windowrule = opaque on, match:class ^(dota2)$
windowrule = idle_inhibit always, match:class ^(dota2)$
#windowrule = immediate off, match:class ^(dota2)$

# -- RV --

#windowrulev2 = monitor DP-3, title:^(Ride)$

# --- Project Zomboid ---

windowrule = immediate on, match:class ^(Project Zomboid)$
windowrule = opaque on, match:class ^(Project Zomboid)$

# --- Stardew Valley ---

windowrule = immediate on, match:class ^(Stardew Valley)$
windowrule = opaque on, match:class ^(Stardew Valley)$

	###############################
	####    END GAME SPACE     ####
	###############################

